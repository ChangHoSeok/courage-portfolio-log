var signIn=(function(){var b="#signInModal";$(b).on("hidden.bs.modal",function(){var d=$(this).find("#password");d.val("");d.parent("div.form-group").removeClass("floating-label-form-group-with-value");d.parent().find(".help-block").html("")});$(b+" input, textarea").jqBootstrapValidation({preventSubmit:true,submitError:function(d,e,f){},submitSuccess:function(d,e){e.preventDefault();var f={password:d.find("#password").val()};$.ajax({url:jsContextPath+"/member/signin",type:"POST",data:JSON.stringify(f),dataType:"json",contentType:"application/json; charset=UTF-8",cache:false,success:function(g){if(g.isLogin){a();$(b).modal("toggle")}else{alert("패스워드 인증 실패!!")}},error:function(g,h){if(g.status==400){$.each(g.responseJSON.errors,function(i,j){alert(j.defaultMessage)})}}})}});function a(){$.ajax({url:jsContextPath+"/member/me",type:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",cache:false,success:function(d){if(d){$(".gravatarImg").attr("src",d.memberInfo.gravatarUrl);$("#signin").hide();$("#avartar").show()}else{$("#signin").show();$("#avartar").hide()}},error:function(d,f){$("#signin").show();$("#avartar").hide()}})}function c(){a()}return{init:c}})();signIn.init();